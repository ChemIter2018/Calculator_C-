<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Calculator.UI.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="600"
        x:Class="Calculator.UI.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Modern Scientific Calculator"
        Width="350" Height="500"
        WindowStartupLocation="CenterScreen"
        Background="#1E1E1E"
        Foreground="White"
        RequestedThemeVariant="Dark">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Grid RowDefinitions="Auto, *, 2*">
        <!-- Display Area -->
        <StackPanel Grid.Row="1" Margin="20" VerticalAlignment="Bottom">
            <TextBlock Text="{Binding DisplayText}" 
                       FontSize="20" 
                       Foreground="#AAAAAA" 
                       TextAlignment="Right"
                       TextWrapping="Wrap"/>
            <TextBlock Text="{Binding ResultText}" 
                       FontSize="48" 
                       FontWeight="Bold" 
                       TextAlignment="Right"
                       Margin="0,10,0,0"/>
        </StackPanel>

        <!-- Keypad Area -->
        <Grid Grid.Row="2" Margin="10" ColumnDefinitions="*,*,*,*,*" RowDefinitions="*,*,*,*,*,*">
            <Grid.Styles>
                <Style Selector="Button">
                    <Setter Property="HorizontalAlignment" Value="Stretch"/>
                    <Setter Property="VerticalAlignment" Value="Stretch"/>
                    <Setter Property="Margin" Value="2"/>
                    <Setter Property="HorizontalContentAlignment" Value="Center"/>
                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                    <Setter Property="FontSize" Value="16"/>
                    <Setter Property="Background" Value="#2D2D2D"/>
                    <Setter Property="CornerRadius" Value="4"/>
                </Style>
                <Style Selector="Button.operator">
                    <Setter Property="Background" Value="#3D3D3D"/>
                </Style>
                <Style Selector="Button.action">
                    <Setter Property="Background" Value="#007ACC"/>
                </Style>
                <Style Selector="Button.scientific">
                    <Setter Property="FontSize" Value="14"/>
                    <Setter Property="Foreground" Value="#007ACC"/>
                </Style>
            </Grid.Styles>

            <!-- Row 0: Scientific -->
            <Button Grid.Row="0" Grid.Column="0" Content="sin" Classes="scientific" Command="{Binding AddCharacterCommand}" CommandParameter="sin("/>
            <Button Grid.Row="0" Grid.Column="1" Content="cos" Classes="scientific" Command="{Binding AddCharacterCommand}" CommandParameter="cos("/>
            <Button Grid.Row="0" Grid.Column="2" Content="tan" Classes="scientific" Command="{Binding AddCharacterCommand}" CommandParameter="tan("/>
            <Button Grid.Row="0" Grid.Column="3" Content="log" Classes="scientific" Command="{Binding AddCharacterCommand}" CommandParameter="log("/>
            <Button Grid.Row="0" Grid.Column="4" Content="ln" Classes="scientific" Command="{Binding AddCharacterCommand}" CommandParameter="ln("/>

            <!-- Row 1 -->
            <Button Grid.Row="1" Grid.Column="0" Content="(" Classes="operator" Command="{Binding AddCharacterCommand}" CommandParameter="("/>
            <Button Grid.Row="1" Grid.Column="1" Content=")" Classes="operator" Command="{Binding AddCharacterCommand}" CommandParameter=")"/>
            <Button Grid.Row="1" Grid.Column="2" Content="^" Classes="operator" Command="{Binding AddCharacterCommand}" CommandParameter="^"/>
            <Button Grid.Row="1" Grid.Column="3" Content="C" Classes="action" Command="{Binding ClearCommand}"/>
            <Button Grid.Row="1" Grid.Column="4" Content="âŒ«" Classes="action" Command="{Binding BackspaceCommand}"/>

            <!-- Row 2 -->
            <Button Grid.Row="2" Grid.Column="0" Content="7" Command="{Binding AddCharacterCommand}" CommandParameter="7"/>
            <Button Grid.Row="2" Grid.Column="1" Content="8" Command="{Binding AddCharacterCommand}" CommandParameter="8"/>
            <Button Grid.Row="2" Grid.Column="2" Content="9" Command="{Binding AddCharacterCommand}" CommandParameter="9"/>
            <Button Grid.Row="2" Grid.Column="3" Content="/" Classes="operator" Command="{Binding AddCharacterCommand}" CommandParameter="/"/>
            <Button Grid.Row="2" Grid.Column="4" Content="sqrt" Classes="scientific" Command="{Binding AddCharacterCommand}" CommandParameter="sqrt("/>

            <!-- Row 3 -->
            <Button Grid.Row="3" Grid.Column="0" Content="4" Command="{Binding AddCharacterCommand}" CommandParameter="4"/>
            <Button Grid.Row="3" Grid.Column="1" Content="5" Command="{Binding AddCharacterCommand}" CommandParameter="5"/>
            <Button Grid.Row="3" Grid.Column="2" Content="6" Command="{Binding AddCharacterCommand}" CommandParameter="6"/>
            <Button Grid.Row="3" Grid.Column="3" Content="*" Classes="operator" Command="{Binding AddCharacterCommand}" CommandParameter="*"/>
            <Button Grid.Row="3" Grid.Column="4" Content="pi" Classes="scientific" Command="{Binding AddCharacterCommand}" CommandParameter="3.14159"/>

            <!-- Row 4 -->
            <Button Grid.Row="4" Grid.Column="0" Content="1" Command="{Binding AddCharacterCommand}" CommandParameter="1"/>
            <Button Grid.Row="4" Grid.Column="1" Content="2" Command="{Binding AddCharacterCommand}" CommandParameter="2"/>
            <Button Grid.Row="4" Grid.Column="2" Content="3" Command="{Binding AddCharacterCommand}" CommandParameter="3"/>
            <Button Grid.Row="4" Grid.Column="3" Content="-" Classes="operator" Command="{Binding AddCharacterCommand}" CommandParameter="-"/>
            <Button Grid.Row="4" Grid.Column="4" Content="+" Classes="operator" Command="{Binding AddCharacterCommand}" CommandParameter="+"/>

            <!-- Row 5 (merged) -->
            <Button Grid.Row="5" Grid.Column="0" Content="0" Command="{Binding AddCharacterCommand}" CommandParameter="0"/>
            <Button Grid.Row="5" Grid.Column="1" Content="." Command="{Binding AddCharacterCommand}" CommandParameter="."/>
            <Button Grid.Row="5" Grid.Column="2" Grid.ColumnSpan="3" Content="=" Classes="action" Command="{Binding ExecuteCalculateCommand}"/>
        </Grid>
    </Grid>
</Window>